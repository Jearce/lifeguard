{% extends 'sidebar.html' %}
{% load crispy_forms_tags %}

{% block title %}
<title>Lifeguard Classes</title>

<style>
	.schedule {
		display: flex;
		flex-direction: column;
	}

	.days {
		display: flex;
		justify-content: flex-start;
	}

	.date-container {
		display: flex;
		flex-direction: column;
		align-items: center;
		border: 1px solid grey;
		border-radius: 5px;
	}

	.date-container * {
		width: 100%;
		text-align: center;
		padding: 10px;
	}

	.month {
		background-color: black;
		color: white;
	}

	.day-of-month {
		font-size: 26px;
		font-weight: bold;
		padding-bottom: 0px;
	}

	.day-of-week {
		padding: 0px;
		font-size: 15px;
	}

	.time {
		font-weight: bold;
	}

	.year {
		font-size: 20px;
	}

	p {
		font-size: 20px;
		margin-left: 5px;
	}

	@media only screen and (max-width: 600px) {
		.days {
			flex-direction: column;
		}
	}
</style>
{% endblock title %}

{% block pagecontent %}
<div class="container">
	<div class="row">
		<div class="col mb-4">
			{% if not user.is_lifeguard %}
			<div class="alert alert-info">
				You have have not completed the lifeguard application.
				To enroll in one of our lifeguard classes please complete the application
				<a href="{% url 'lifeguard:create' %}" class="alert-link">here</a>.
			</div>
			{% else %}
			<h1 class="mt-4 text-center">Available Lifeguarding Classes</h1>
			{{ classes }}
			{% for class in classes %}
			<div class="w-25 card border-dark mb-3 mt-3 center-form">
				<div class="card-header">
					<h3>{{ class.course }}</h3>
				</div>
				<div class="card-body">
					<ul class="list-group list-group-flush">
						<li class="list-group-item">
							<div class="schedule">
								<div>
									<h5>Schedule for this class</h5>
								</div>
								<div class="days">
									{% for class_session in class.get_sessions %}
										<div class="date-container">
											<div class="month">
												{{ class_session.date|date:"F"|upper }}
											</div>
											<div>
												<div class="day-of-month">
													{{ class_session.date|date:"n" }}
												</div>
												<div class="day-of-week">
													{{ class_session.date|date:"l" }}
												</div>
											</div>
											<div class="time">
												{{ class_session.start_time|date:"P" }} - {{ class_session.end_time|date:"P"}}
											</div>
											<div class="year">
												{{ class_session.date|date:"Y" }}
											</div>
										</div>
									{% endfor %}
									<div>
								</div>
							</div>
						</li>
						<li class="list-group-item">
							<div class="d-flex justify-content-between">
								<h5>Cost</h5>
								<p>
									${{ class.cost }}
								</p>
							</div>
						</li>
						<li class="list-group-item">
							<div class="d-flex justify-content-between">
								<h5>Employee cost</h5>
								<p>
									${{ class.employee_cost }}
								</p>
						</li>
					</ul>
				</div>
				<div class="card-footer text-center">
					<form method="post" action="{% url 'lifeguard:classes' class.id %}">
						{% csrf_token %}
						<input name="enroll-btn" class="btn btn-outline-dark btn-lg btn-block" type="submit"
							value="enroll">
					</form>
				</div>
			</div>
			{% endfor %}
			{% endif %}
		</div>
	</div>
</div>
{% endblock pagecontent %}